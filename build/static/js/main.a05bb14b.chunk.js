(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{21:function(e,n,t){},22:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),a=t.n(r),u=t(15),o=t.n(u),i=(t(21),t(6)),s=t(3),l=(t(22),t(4)),d=t.n(l),j="/api/persons",b=function(){return d.a.get(j)},f=function(e){return d.a.post(j,e)},m=function(e){return d.a.delete("".concat(j,"/").concat(e))},h=function(e,n){return d.a.put("".concat(j,"/").concat(e),n)},O=function(e){return Object(c.jsxs)("div",{children:["Filter: ",Object(c.jsx)("input",{value:e.value,onChange:e.onChange})]})},v=function(e){var n=e.onSubmit,t=e.nameValue,r=e.numberValue,a=e.nameHandler,u=e.numberHandle;return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["Name: ",Object(c.jsx)("input",{value:t,onChange:a})]}),Object(c.jsxs)("div",{children:["Phone number: ",Object(c.jsx)("input",{value:r,onChange:u})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},p=function(e){return e.newSearch?Object(c.jsx)("ul",{children:e.persons.filter((function(n){return n.name.toLowerCase().includes(e.newSearch.toLowerCase())})).map((function(n){return Object(c.jsxs)("li",{value:n.id,style:{textTransform:"capitalize"},children:[n.name," ",n.number,Object(c.jsx)("button",{value:n.id,onClick:e.onClickHandler,children:"Delete"})]},n.id)}))}):Object(c.jsx)("ul",{children:e.persons.map((function(n){return Object(c.jsxs)("li",{value:n.id,style:{textTransform:"capitalize"},children:[n.name," ",n.number,Object(c.jsx)("button",{value:n.id,onClick:e.onClickHandler,children:"Delete"})]},n.id)}))})},x=function(e){var n=e.message;return n?Object(c.jsx)("div",{className:"success",children:n}):null},w=function(e){var n=e.errorMessage;return n?Object(c.jsx)("div",{className:"error",children:n}):null},g=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],u=Object(r.useState)(""),o=Object(s.a)(u,2),l=o[0],d=o[1],j=Object(r.useState)(""),g=Object(s.a)(j,2),C=g[0],y=g[1],S=Object(r.useState)(""),k=Object(s.a)(S,2),H=k[0],T=k[1],L=Object(r.useState)(""),E=Object(s.a)(L,2),N=E[0],P=E[1],V=Object(r.useState)(""),D=Object(s.a)(V,2),M=D[0],z=D[1];Object(r.useEffect)((function(){b().then((function(e){a(e.data)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)(x,{message:N}),Object(c.jsx)(w,{errorMessage:M}),Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(O,{value:H,onChange:function(e){T(e.target.value)}}),Object(c.jsx)(v,{onSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name.toLowerCase()===l.toLowerCase()})),c={name:l,number:C};if(n&&window.confirm("Haluatko lis\xe4t\xe4 uuden numeron henkil\xf6lle?")){var r=l.toLowerCase(),u=C,o=t.find((function(e){return e.name.toLowerCase()===r})).id;console.log(o);var s=Object(i.a)(Object(i.a)({},o),{},{name:r,number:u});h(o,s).then((function(e){var n=t.map((function(n){return n.id!==o?n:e.data}));console.log(n),a(n);var c=" '".concat(e.data.name,"' was updated succesfully to the server");P(c),setTimeout((function(){P(null)}),11e3)})).catch((function(e){z("Person was already removed from server"),setTimeout((function(){z(null)}),11e3)}))}n||(console.log("Ei l\xf6ydy listalta, lis\xe4t\xe4\xe4n...."),f(c).then((function(e){a(t.concat(e.data));var n=" '".concat(e.data.name,"' was added succesfully to the server");P(n),setTimeout((function(){P(null)}),11e3)})).catch((function(e){z("Error happened"),setTimeout((function(){z(null)}),11e3)})))},nameValue:l,nameHandler:function(e){d(e.target.value)},numberValue:C,numberHandle:function(e){y(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(p,{persons:t,newSearch:H,onClickHandler:function(e){var n=e.target.value,c=t.filter((function(e){return e.id===parseInt(n)}));window.confirm("Are you sure you want to delete ".concat(c.map((function(e){return e.name})),"?"))&&m(n).then((function(e){P("".concat(c.map((function(e){return e.name}))," was deleted succesfully from the server")),setTimeout((function(){P(null)}),11e3);var r=t.filter((function(e){return e.id!=n}));a(r)})).catch((function(e){z("Person was already removed from server"),setTimeout((function(){z(null)}),11e3)}))}})]})};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.a05bb14b.chunk.js.map