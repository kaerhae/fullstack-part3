{"version":3,"sources":["services/persons.js","components/filterPerson.js","components/addPerson.js","components/showAllPersons.js","components/Notification.js","components/ErrorMessage.js","App.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","delete","put","Filter","props","value","onChange","Add","onSubmit","nameValue","numberValue","nameHandler","numberHandle","type","ShowPerson","newSearch","persons","filter","person","name","toLowerCase","includes","map","user","style","textTransform","number","onClick","onClickHandler","Notification","message","className","ErrorMessage","errorMessage","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setNewSearch","setMessage","setErrorMessage","useEffect","personService","then","response","data","event","target","preventDefault","personResult","find","personObject","window","confirm","returnedId","p","console","log","changedPerson","filtered","successMessage","setTimeout","catch","error","concat","parseInt","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a05bb14b.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAllPersons = () => {\n    return axios.get(baseUrl)\n}\n\nconst createPerson = newObject => {\n\n    return axios.post(baseUrl, newObject)\n}\n\nconst deletePerson = (id) => {\n    return axios.delete(`${baseUrl}/${id}`)\n}\n\nconst updatePerson = (id, newObject) => {\n    return axios.put(`${baseUrl}/${id}`, newObject)\n}\n\n\nexport default {\n    getAllPersons: getAllPersons,\n    createPerson: createPerson,\n    deletePerson: deletePerson,\n    updatePerson: updatePerson\n}","import React from 'react';\n\nconst Filter = (props) => {\n    return (\n        <div>\n        Filter: <input value={props.value} onChange={props.onChange} />\n      </div>\n    )\n}\n\n\nexport default Filter;","import React from 'react'\n\n\nconst Add = ({onSubmit, nameValue, numberValue, nameHandler, numberHandle}) => {\n\n\n    return (\n        <div>\n            <form onSubmit={onSubmit}>\n        <div>\n          Name: <input value={nameValue} onChange={nameHandler}/>\n        </div>\n        <div>\n          Phone number: <input value={numberValue} onChange={numberHandle}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      </div>\n    )\n}\n\nexport default Add","import React from 'react'\n\nconst ShowPerson = (props) => {\n\n    if(props.newSearch) {\n      return (\n        <ul>\n          {props.persons.filter(person => \n            person.name.toLowerCase().includes(props.newSearch.toLowerCase())).map(user => \n            <li value={user.id} key={user.id} style={{textTransform: 'capitalize'}}>\n              {user.name} {user.number} \n              <button value={user.id} onClick={props.onClickHandler}>\n                Delete\n              </button>\n            </li>)} \n        </ul>\n      )\n    } else {\n      return (\n        <ul>\n          {props.persons.map(user => \n            <li value={user.id} key={user.id} style={{textTransform: 'capitalize'}}>\n              {user.name} {user.number} \n              <button value={user.id} onClick={props.onClickHandler}>\n                Delete\n              </button>\n            </li>)} \n        </ul>\n      )\n    }\n}\n\nexport default ShowPerson","import React from 'react'\n\nconst Notification = ({ message }) => {\n\n  if (!message) {\n    return null\n  } else {\n    return (\n      <div className=\"success\">\n        {message} \n      </div>\n    )\n  }\n  \n}\n  \nexport default Notification","import React from 'react'\n\nconst ErrorMessage = ({ errorMessage }) => {\n\n  if (!errorMessage) {\n    return null\n  } else {\n    return (\n      <div className=\"error\">\n        {errorMessage} \n      </div>\n    )\n  }\n  \n}\n  \nexport default ErrorMessage","import './App.css'\nimport personService from './services/persons'\nimport React, { useEffect, useState } from 'react'\nimport Filter from './components/filterPerson'\nimport Add from './components/addPerson'\nimport ShowPerson from './components/showAllPersons'\nimport Notification from './components/Notification'\nimport ErrorMessage from './components/ErrorMessage'\n\nconst App = () => {\n  \n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newSearch, setNewSearch ] = useState('')\n  const [ message, setMessage ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState('')\n\n  useEffect(() =>  {\n    personService\n      .getAllPersons()\n      .then(response => {\n        setPersons(response.data)\n      })\n}, [])\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewSearch(event.target.value)\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    const personResult = persons.find( ({ name }) => \n    name.toLowerCase() === newName.toLowerCase())\n    const personObject = \n    {\n      name: newName,\n      number: newNumber,\n    }    \n    if(personResult)\n    {\n      if(window.confirm(\"Haluatko lisätä uuden numeron henkilölle?\"))\n      { \n        const name = newName.toLowerCase()\n        const number = newNumber\n        const findPerson = persons.find(p => p.name.toLowerCase() === name)\n        const returnedId = findPerson.id\n        console.log(returnedId)\n        const changedPerson = {...returnedId, name, number}\n        \n        personService\n          .updatePerson(returnedId, changedPerson)\n          .then(response => {\n            const filtered = persons.map(person => person.id !== returnedId ? person : response.data)\n            console.log(filtered)      \n            setPersons(filtered)\n            const successMessage = ` '${response.data.name}' was updated succesfully to the server`\n            setMessage(successMessage)\n            setTimeout(() => {\n              setMessage(null)\n            }, 11000)\n          })\n          .catch(error => {\n            const errorMessage = `Person was already removed from server`\n            setErrorMessage(errorMessage)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 11000)\n          })\n      }\n    }\n    if(!personResult)\n    {\n      console.log(\"Ei löydy listalta, lisätään....\")\n      personService\n        .createPerson(personObject)\n        .then(response => {\n          setPersons(persons.concat(response.data))\n          const successMessage = ` '${response.data.name}' was added succesfully to the server`\n          setMessage(successMessage)\n          setTimeout(() => {\n            setMessage(null)\n          }, 11000)\n        })\n        .catch(error => {\n          const errorMessage = `Error happened`\n          setErrorMessage(errorMessage)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 11000)\n        })\n    }\n}\n\n  const handleDelete = (event) => {\n    const id = event.target.value\n    const person = persons.filter(p => p.id === parseInt(id))\n\n      if (window.confirm(`Are you sure you want to delete ${person.map(p => p.name)}?`))\n      {\n        personService\n      .deletePerson(id)\n      .then(response => {\n        setMessage(\n          `${person.map(p => p.name)} was deleted succesfully from the server`\n        )\n        setTimeout(() => {\n          setMessage(null)\n        }, 11000)\n        const filtered = persons.filter(person => person.id != id)\n        setPersons(filtered)   \n      })\n      .catch(error => {\n        const errorMessage = `Person was already removed from server`\n        setErrorMessage(errorMessage)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 11000)\n      })\n    }\n  }\n\n\n\n  return (\n    <div>\n      <Notification message={message} />\n      <ErrorMessage errorMessage={errorMessage} />\n      <h2>Phonebook</h2>\n      <Filter value={newSearch} onChange={handleFilterChange}/>\n      <Add \n      onSubmit={handleSubmit}\n      nameValue={newName}\n      nameHandler={handleNameChange}\n      numberValue={newNumber}\n      numberHandle={handleNumberChange}\n      />\n\n      <h2>Numbers</h2>\n      <ShowPerson\n        persons={persons}\n        newSearch={newSearch}\n        onClickHandler={handleDelete}\n      />\n    </div>\n  )\n\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}