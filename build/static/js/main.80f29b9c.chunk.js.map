{"version":3,"sources":["services/persons.js","components/filterPerson.js","components/addPerson.js","components/showAllPersons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","delete","put","Filter","props","value","onChange","Add","onSubmit","nameValue","numberValue","nameHandler","numberHandle","type","ShowPerson","persons","filter","person","name","toLowerCase","includes","newSearch","map","user","style","textTransform","number","onClick","onClickHandler","Notification","message","errorMessage","className","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setNewSearch","setNewPerson","setMessage","useEffect","personService","then","response","data","console","log","length","event","target","preventDefault","personResult","find","personObject","window","confirm","returnedId","p","changedPerson","filtered","successMessage","setTimeout","catch","error","concat","poistettu","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.80f29b9c.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAllPersons = () => {\n    return axios.get(baseUrl)\n}\n\nconst createPerson = newObject => {\n\n    return axios.post(baseUrl, newObject)\n}\n\nconst deletePerson = (id) => {\n    return axios.delete(`${baseUrl}/${id}`)\n}\n\nconst updatePerson = (id, newObject) => {\n    return axios.put(`${baseUrl}/${id}`, newObject)\n}\n\n\nexport default {\n    getAllPersons: getAllPersons,\n    createPerson: createPerson,\n    deletePerson: deletePerson,\n    updatePerson: updatePerson\n}","import React from 'react';\nimport ReactDOM from 'react-dom'\n\n\n\n\nconst Filter = (props) => {\n\n\n\n\n    return (\n        <div>\n        Filter: <input value={props.value} onChange={props.onChange} />\n      </div>\n    )\n}\n\n\nexport default Filter;","import React from 'react'\n\n\nconst Add = ({onSubmit, nameValue, numberValue, nameHandler, numberHandle}) => {\n\n\n    return (\n        <div>\n            <form onSubmit={onSubmit}>\n        <div>\n          Name: <input value={nameValue} onChange={nameHandler}/>\n        </div>\n        <div>\n          Phone number: <input value={numberValue} onChange={numberHandle}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      </div>\n    )\n}\n\nexport default Add","import React from 'react'\n\nconst ShowPerson = (props) => {\n\n\n \n    return (\n\n        <ul>\n        {props.persons.filter(person => \n          person.name.toLowerCase().includes(props.newSearch.toLowerCase())).map(user => \n          <li value={user.id} key={user.id} style={{textTransform: 'capitalize'}}>\n            {user.name} {user.number} \n          <button value={user.id} onClick={props.onClickHandler}>\n            Delete\n          </button>\n          </li>)} \n      </ul>\n    )\n}\n\nexport default ShowPerson","import React from 'react'\n\nconst Notification = ({ message, errorMessage }) => {\n\n    if (message === null) {\n      return null\n    }\n\n  const checkError =  message === errorMessage\n    \n  if(checkError)\n  {\n      return (\n        <div className=\"error\">\n          {message} \n        </div>\n      )\n    }\n\n   \n\n\n  return (\n      <div className=\"success\">\n          {message}\n      </div>\n  )\n\n  }\n  \nexport default Notification","import './App.css'\nimport personService from './services/persons'\nimport React, { useEffect, useState } from 'react'\nimport Filter from './components/filterPerson'\nimport Add from './components/addPerson'\nimport ShowPerson from './components/showAllPersons'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  \n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newSearch, setNewSearch ] = useState('')\n  const [ newPerson,  setNewPerson ] = useState('')\n  const [ message, setMessage ] = useState('')\n\n\n\n  useEffect(() =>  {\n    personService\n      .getAllPersons()\n      .then(response => {\n        setPersons(response.data)\n      })\n}, [])\n\n  console.log('render', persons.length, 'notes')\n\n\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewSearch(event.target.value)\n    \n  }\n\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n\n    const personResult = persons.find( ({ name }) => \n    name.toLowerCase() === newName.toLowerCase())\n    const personObject = \n    {\n      name: newName,\n      number: newNumber,\n     \n    }    \n    if(personResult)\n    {\n      console.log(\"Miksi me ollaan täällä?\")\n      if(window.confirm(\"Haluatko lisätä uuden numeron henkilölle?\"))\n      { \n        const name = newName.toLowerCase()\n      \n        const number = newNumber\n        const findPerson = persons.find(p => p.name.toLowerCase() === name)\n        const returnedId = findPerson.id\n        const changedPerson = {...returnedId, name, number}\n        \n\n        personService\n          .updatePerson(returnedId, changedPerson)\n          .then(response => {\n            const filtered = persons.map(person => person.id != returnedId ? returnedId : response.data)\n            console.log(filtered)\n          \n          \n            setPersons(filtered)\n            const successMessage = ` '${response.data.name}' was updated succesfully to the server`\n            setMessage(successMessage)\n            setTimeout(() => {\n              setMessage(null)\n            }, 11000)\n          })\n          .catch(error => {\n            const errorMessage = `Person was already removed from server`\n            setMessage(errorMessage)\n            setTimeout(() => {\n              setMessage(null)\n            }, 11000)\n          })\n        \n      }\n      \n    }\n    if(!personResult)\n    {\n      console.log(\"Ei löydy listalta, lisätään....\")\n      personService\n        .createPerson(personObject)\n        .then(response => {\n          console.log(response.data)\n          setPersons(persons.concat(response.data))\n\n          setNewPerson('')\n          const successMessage = ` '${response.data.name}' was succesfully added to the server`\n\n          setMessage(successMessage)\n          console.log(message)\n          setTimeout(() => {\n            setMessage(null)\n          }, 11000)\n  \n\n        })\n    }\n\n}\n\n\n  const handleDelete = (event) => {\n    const id = event.target.value\n    console.log(id)\n\n      if (window.confirm(\"Are you sure you want to delete \" + id))\n      {\n        personService\n      .deletePerson(id)\n      .then(response => {\n        const successMessage = persons.find(person => person.id)\n        console.log(successMessage, \"Tässä on ihmiset\")\n\n        const poistettu = successMessage.name\n        console.log(poistettu)\n\n        setMessage(\n          ` '${poistettu}' was deleted succesfully to the server`\n        )\n        setTimeout(() => {\n          setMessage(null)\n        }, 11000)\n        const filtered = persons.filter(person => person.id != id)\n        setPersons(filtered)   \n      })\n    }\n  }\n\n\n\n  return (\n    <div>\n      <Notification message={message} />\n\n      <h2>Phonebook</h2>\n      <Filter value={newSearch} onChange={handleFilterChange}/>\n      <Add \n      onSubmit={handleSubmit}\n      nameValue={newName}\n      nameHandler={handleNameChange}\n      numberValue={newNumber}\n      numberHandle={handleNumberChange}\n      />\n\n      <h2>Numbers</h2>\n      <ShowPerson\n        persons={persons}\n        newSearch={newSearch}\n        onClickHandler={handleDelete}\n      />\n    </div>\n  )\n\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}